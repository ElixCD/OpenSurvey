-- MySQL Script generated by MySQL Workbench
-- Thu Feb 11 14:00:46 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema Sysurvey
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `Sysurvey` ;

-- -----------------------------------------------------
-- Schema Sysurvey
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Sysurvey` DEFAULT CHARACTER SET utf8 ;
USE `Sysurvey` ;

-- -----------------------------------------------------
-- Table `Sysurvey`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`users` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`users` (
  `iduser` INT NOT NULL AUTO_INCREMENT,
  `email` VARCHAR(45) NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`iduser`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`factors`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`factors` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`factors` (
  `idfactor` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(45) NULL,
  `users_iduser` INT NOT NULL,
  PRIMARY KEY (`idfactor`),
  INDEX `fk_factor_users1_idx` (`users_iduser` ASC),
  CONSTRAINT `fk_factor_users1`
    FOREIGN KEY (`users_iduser`)
    REFERENCES `Sysurvey`.`users` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`rubrics`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`rubrics` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`rubrics` (
  `idrubric` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(45) NOT NULL,
  `value` VARCHAR(45) NOT NULL,
  `factors_idfactor` INT NOT NULL,
  PRIMARY KEY (`idrubric`),
  INDEX `fk_rubric_factor1_idx` (`factors_idfactor` ASC),
  CONSTRAINT `fk_rubric_factor1`
    FOREIGN KEY (`factors_idfactor`)
    REFERENCES `Sysurvey`.`factors` (`idfactor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`permisions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`permisions` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`permisions` (
  `idpermision` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idpermision`))
ENGINE = MyISAM;


-- -----------------------------------------------------
-- Table `Sysurvey`.`modules`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`modules` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`modules` (
  `idmodule` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `permisions_idpermision` INT NOT NULL,
  PRIMARY KEY (`idmodule`),
  INDEX `fk_module_module_type1_idx` (`permisions_idpermision` ASC),
  CONSTRAINT `fk_module_module_type1`
    FOREIGN KEY (`permisions_idpermision`)
    REFERENCES `Sysurvey`.`permisions` (`idpermision`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`user_types`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`user_types` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`user_types` (
  `iduser_type` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(45) NOT NULL,
  `modules_idmodule` INT NOT NULL,
  `users_iduser` INT NOT NULL,
  PRIMARY KEY (`iduser_type`),
  INDEX `fk_user_type_module1_idx` (`modules_idmodule` ASC),
  INDEX `fk_user_type_users1_idx` (`users_iduser` ASC),
  CONSTRAINT `fk_user_type_module1`
    FOREIGN KEY (`modules_idmodule`)
    REFERENCES `Sysurvey`.`modules` (`idmodule`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_type_users1`
    FOREIGN KEY (`users_iduser`)
    REFERENCES `Sysurvey`.`users` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`surveys`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`surveys` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`surveys` (
  `idsurvey` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idsurvey`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`questions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`questions` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`questions` (
  `idquestion` INT NOT NULL AUTO_INCREMENT,
  `value` VARCHAR(45) NOT NULL,
  `factors_idfactor` INT NOT NULL,
  `surveys_idsurvey` INT NOT NULL,
  PRIMARY KEY (`idquestion`),
  INDEX `fk_questions_factor1_idx` (`factors_idfactor` ASC),
  INDEX `fk_questions_survey1_idx` (`surveys_idsurvey` ASC),
  CONSTRAINT `fk_questions_factor1`
    FOREIGN KEY (`factors_idfactor`)
    REFERENCES `Sysurvey`.`factors` (`idfactor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_questions_survey1`
    FOREIGN KEY (`surveys_idsurvey`)
    REFERENCES `Sysurvey`.`surveys` (`idsurvey`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`support_languages`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`support_languages` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`support_languages` (
  `idsupport_languages` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `iso639` VARCHAR(3) NOT NULL,
  PRIMARY KEY (`idsupport_languages`))
ENGINE = MyISAM;


-- -----------------------------------------------------
-- Table `Sysurvey`.`responses`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`responses` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`responses` (
  `idresponse` INT NOT NULL AUTO_INCREMENT,
  `response` VARCHAR(45) NULL,
  `questions_idquestion` INT NOT NULL,
  PRIMARY KEY (`idresponse`),
  INDEX `fk_response_questions1_idx` (`questions_idquestion` ASC),
  CONSTRAINT `fk_response_questions1`
    FOREIGN KEY (`questions_idquestion`)
    REFERENCES `Sysurvey`.`questions` (`idquestion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Sysurvey`.`user_surveys`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Sysurvey`.`user_surveys` ;

CREATE TABLE IF NOT EXISTS `Sysurvey`.`user_surveys` (
  `iduser_survey` INT NOT NULL AUTO_INCREMENT,
  `users_iduser` INT NOT NULL,
  `surveys_idsurvey` INT NOT NULL,
  `propietary` TINYINT NOT NULL,
  `complete` TINYINT NOT NULL,
  PRIMARY KEY (`iduser_survey`),
  INDEX `fk_user_survey_users1_idx` (`users_iduser` ASC),
  INDEX `fk_user_survey_survey1_idx` (`surveys_idsurvey` ASC),
  CONSTRAINT `fk_user_survey_users1`
    FOREIGN KEY (`users_iduser`)
    REFERENCES `Sysurvey`.`users` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_survey_survey1`
    FOREIGN KEY (`surveys_idsurvey`)
    REFERENCES `Sysurvey`.`surveys` (`idsurvey`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
